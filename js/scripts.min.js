(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(jQuery)}})(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function n(t){return a.raw?t:decodeURIComponent(t)}function i(t){return e(a.json?JSON.stringify(t):String(t))}function o(t){if(t.indexOf('"')===0){t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{t=decodeURIComponent(t.replace(s," "));return a.json?JSON.parse(t):t}catch(e){}}function r(e,n){var i=a.raw?e:o(e);return t.isFunction(n)?n(i):i}var s=/\+/g;var a=t.cookie=function(o,s,u){if(s!==undefined&&!t.isFunction(s)){u=t.extend({},a.defaults,u);if(typeof u.expires==="number"){var l=u.expires,c=u.expires=new Date;c.setTime(+c+l*864e5)}return document.cookie=[e(o),"=",i(s),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var d=o?undefined:{};var p=document.cookie?document.cookie.split("; "):[];for(var f=0,h=p.length;f<h;f++){var m=p[f].split("=");var g=n(m.shift());var y=m.join("=");if(o&&o===g){d=r(y,s);break}if(!o&&(y=r(y))!==undefined){d[g]=y}}return d};a.defaults={};t.removeCookie=function(e,n){if(t.cookie(e)===undefined){return false}t.cookie(e,"",t.extend({},n,{expires:-1}));return!t.cookie(e)}});(function(t,e){"use strict";var n=t.History=t.History||{},i=t.jQuery;if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(t,e,n){i(t).bind(e,n)},trigger:function(t,e,n){i(t).trigger(e,n)},extractEventData:function(t,n,i){var o=n&&n.originalEvent&&n.originalEvent[t]||i&&i[t]||e;return o},onDomLoad:function(t){i(t)}},typeof n.init!="undefined"&&n.init()})(window),function(t,e){"use strict";var n=t.console||e,i=t.document,o=t.navigator,r=!1,s=t.setTimeout,a=t.clearTimeout,u=t.setInterval,l=t.clearInterval,c=t.JSON,d=t.alert,p=t.History=t.History||{},f=t.history;try{r=t.sessionStorage,r.setItem("TEST","1"),r.removeItem("TEST")}catch(h){r=!1}c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode;if(typeof p.init!="undefined")throw new Error("History.js Core has already been loaded...");p.init=function(t){return typeof p.Adapter=="undefined"?!1:(typeof p.initCore!="undefined"&&p.initCore(),typeof p.initHtml4!="undefined"&&p.initHtml4(),!0)},p.initCore=function(h){if(typeof p.initCore.initialized!="undefined")return!1;p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||i.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if(typeof e!="undefined"&&e!==null){for(t=0;t<e.length;t++)l(e[t]);p.intervalList=null}},p.debug=function(){(p.options.debug||!1)&&p.log.apply(p,arguments)},p.log=function(){var t=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",e=i.getElementById("log"),o,r,s,a,u;t?(a=Array.prototype.slice.call(arguments),o=a.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[o,a]):n.log.apply(n,[o,a])):o="\n"+arguments[0]+"\n";for(r=1,s=arguments.length;r<s;++r){u=arguments[r];if(typeof u=="object"&&typeof c!="undefined")try{u=c.stringify(u)}catch(l){}o+="\n"+u+"\n"}return e?(e.value+=o+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):t||d(o),!0},p.getInternetExplorerMajorVersion=function(){var t=p.getInternetExplorerMajorVersion.cached=typeof p.getInternetExplorerMajorVersion.cached!="undefined"?p.getInternetExplorerMajorVersion.cached:function(){var t=3,e=i.createElement("div"),n=e.getElementsByTagName("i");while((e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0]);return t>4?t:!1}();return t},p.isInternetExplorer=function(){var t=p.isInternetExplorer.cached=typeof p.isInternetExplorer.cached!="undefined"?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return t},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in i)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&o.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&o.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,n;return t?(e=c.stringify(t),n=c.parse(e)):n={},n},p.getRootUrl=function(){var t=i.location.protocol+"//"+(i.location.hostname||i.location.host);if(i.location.port||!1)t+=":"+i.location.port;return t+="/",t},p.getBaseHref=function(){var t=i.getElementsByTagName("base"),e=null,n="";return t.length===1&&(e=t[0],n=e.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var t=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return t},p.getPageUrl=function(){var t=p.getState(!1,!1),e=(t||{}).url||p.getLocationHref(),n;return n=e.replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,n){return/\./.test(t)?t:t+"/"}),n},p.getBasePageUrl=function(){var t=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,n){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},p.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e=typeof e=="undefined"?!0:e,/[a-z]+\:\/\//.test(t)||(i==="/"?n=p.getRootUrl()+t.replace(/^\/+/,""):i==="#"?n=p.getPageUrl().replace(/#.*/,"")+t:i==="?"?n=p.getPageUrl().replace(/[\?#].*/,"")+t:e?n=p.getBaseUrl()+t.replace(/^(\.\/)+/,""):n=p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,n=p.getBaseUrl(),i=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),p.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),e},p.getLocationHref=function(t){return t=t||i,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:t.URL.indexOf("#")==-1&&t.location.href.indexOf("#")!=-1?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){typeof t=="undefined"&&(t=!0),typeof e=="undefined"&&(e=!0);var n=p.getLastSavedState();return!n&&e&&(n=p.createStateObject()),t&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(t){var e=p.extractId(t.url),n;if(!e){n=p.getStateString(t);if(typeof p.stateToId[n]!="undefined")e=p.stateToId[n];else if(typeof p.store.stateToId[n]!="undefined")e=p.store.stateToId[n];else{for(;;){e=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof p.idToState[e]=="undefined"&&typeof p.store.idToState[e]=="undefined")break}p.stateToId[n]=e,p.idToState[e]=t}}return e},p.normalizeState=function(t){var e,n;if(!t||typeof t!="object")t={};if(typeof t.normalized!="undefined")return t;if(!t.data||typeof t.data!="object")t.data={};return e={},e.normalized=!0,e.title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!p.isEmptyObject(e.data),(e.title||n)&&p.options.disableSuid!==!0&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e},p.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=p.normalizeState(i),i},p.getStateById=function(t){t=String(t);var n=p.idToState[t]||p.store.idToState[t]||e;return n},p.getStateString=function(t){var e,n,i;return e=p.normalizeState(t),n={data:e.data,title:t.title,url:t.url},i=c.stringify(n),i},p.getStateId=function(t){var e,n;return e=p.normalizeState(t),n=e.id,n},p.getHashByState=function(t){var e,n;return e=p.normalizeState(t),n=e.hash,n},p.extractId=function(t){var e,n,i,o;return t.indexOf("#")!=-1?o=t.split("#")[0]:o=t,n=/(.*)\&_suid=([0-9]+)$/.exec(o),i=n?n[1]||t:t,e=n?String(n[2]||""):"",e||!1},p.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},p.extractState=function(t,e){var n=null,i,o;return e=e||!1,i=p.extractId(t),i&&(n=p.getStateById(i)),n||(o=p.getFullUrl(t),i=p.getIdByUrl(o)||!1,i&&(n=p.getStateById(i)),!n&&e&&!p.isTraditionalAnchor(t)&&(n=p.createStateObject(null,null,o))),n},p.getIdByUrl=function(t){var n=p.urlToId[t]||p.store.urlToId[t]||e;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||e},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||e},p.hasUrlDuplicate=function(t){var e=!1,n;return n=p.extractState(t.url),e=n&&n.id!==t.id,e},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e=!1,n,i,o;return p.savedStates.length&&(n=t.id,i=p.getLastSavedState(),o=i.id,e=n===o),e},p.saveState=function(t){return p.isLastSavedState(t)?!1:(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){var e=null;return typeof t=="undefined"?e=p.savedStates[p.savedStates.length-1]:t<0?e=p.savedStates[p.savedStates.length+t]:e=p.savedStates[t],e},p.getCurrentIndex=function(){var t=null;return p.savedStates.length<1?t=0:t=p.savedStates.length-1,t},p.getHash=function(t){var e=p.getLocationHref(t),n;return n=p.getHashByUrl(e),n},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e),e},p.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},p.setHash=function(t,e){var n,o;return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),n=p.extractState(t,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==t&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+t,!1)):i.location.hash=t),p)},p.escapeHash=function(e){var n=p.normalizeHash(e);return n=t.encodeURIComponent(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e),e},p.setTitle=function(t){var e=t.title,n;e||(n=p.getStateByIndex(0),n&&n.url===t.url&&(e=n.title||p.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(o){}return i.title=e,p},p.queues=[],p.busy=function(t){typeof t!="undefined"?p.busy.flag=t:typeof p.busy.flag=="undefined"&&(p.busy.flag=!1);if(!p.busy.flag){a(p.busy.timeout);var e=function(){var t,n,i;if(p.busy.flag)return;for(t=p.queues.length-1;t>=0;--t){n=p.queues[t];if(n.length===0)continue;i=n.shift(),p.fireQueueItem(i),p.busy.timeout=s(e,p.options.busyDelay)}};p.busy.timeout=s(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return typeof t=="function"&&(t={callback:t}),typeof e!="undefined"&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(a(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=s(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var e=p.extractState(p.getLocationHref()),n;if(!p.isLastSavedState(e))return n=e,n||(n=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p;return},p.back=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(t,e){var n;if(t>0)for(n=1;n<=t;++n)p.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)p.back(e)}return p};if(p.emulated.pushState){var m=function(){};p.pushState=p.pushState||m,p.replaceState=p.replaceState||m}else p.onPopState=function(e,n){var i=!1,o=!1,r,s;return p.doubleCheckComplete(),r=p.getHash(),r?(s=p.extractState(r||p.getLocationHref(),!0),s?p.replaceState(s.data,s.title,s.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(i=p.Adapter.extractEventData("state",e,n)||!1,i?o=p.getStateById(i):p.expectedStateId?o=p.getStateById(p.expectedStateId):o=p.extractState(p.getLocationHref()),o||(o=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(o)?(p.busy(!1),!1):(p.storeState(o),p.saveState(o),p.setTitle(o),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(e,n,i,o){if(p.getHashByUrl(i)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:o}),!1;p.busy(!0);var r=p.createStateObject(e,n,i);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.pushState(r.id,r.title,r.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(e,n,i,o){if(p.getHashByUrl(i)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:o}),!1;p.busy(!0);var r=p.createStateObject(e,n,i);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.replaceState(r.id,r.title,r.url),p.Adapter.trigger(t,"popstate")),!0};if(r){try{p.store=c.parse(r.getItem("History.store"))||{}}catch(g){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),r&&(p.onUnload=function(){var t,e,n;try{t=c.parse(r.getItem("History.store"))||{}}catch(i){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState){if(!p.idToState.hasOwnProperty(e))continue;t.idToState[e]=p.idToState[e]}for(e in p.urlToId){if(!p.urlToId.hasOwnProperty(e))continue;t.urlToId[e]=p.urlToId[e]}for(e in p.stateToId){if(!p.stateToId.hasOwnProperty(e))continue;t.stateToId[e]=p.stateToId[e]}p.store=t,p.normalizeStore(),n=c.stringify(t);try{r.setItem("History.store",n)}catch(o){if(o.code!==DOMException.QUOTA_EXCEEDED_ERR)throw o;r.length&&(r.removeItem("History.store"),r.setItem("History.store",n))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload));if(!p.emulated.pushState){p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval));if(o.vendor==="Apple Computer, Inc."||(o.appCodeName||"")==="Mozilla")p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})}},(!p.options||!p.options.delayInit)&&p.init()}(window);!function(t){function e(){}function n(t){function n(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,n){t.fn[e]=function(o){if("string"==typeof o){for(var s=i.call(arguments,1),a=0,u=this.length;u>a;a++){var l=this[a],c=t.data(l,e);if(c)if(t.isFunction(c[o])&&"_"!==o.charAt(0)){var d=c[o].apply(c,s);if(void 0!==d)return d}else r("no such method '"+o+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var i=t.data(this,e);i?(i.option(o),i._init()):(i=new n(this,o),t.data(this,e,i))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){n(e),o(t,e)},t.bridget}}var i=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n(t.jQuery)}(window),function(t){function e(e){var n=t.event;return n.target=n.target||n.srcElement||e,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(t,e,n){t.addEventListener(e,n,!1)}:n.attachEvent&&(i=function(t,n,i){t[n+i]=i.handleEvent?function(){var n=e(t);i.handleEvent.call(i,n)}:function(){var n=e(t);i.call(t,n)},t.attachEvent("on"+n,t[n+i])});var o=function(){};n.removeEventListener?o=function(t,e,n){t.removeEventListener(e,n,!1)}:n.detachEvent&&(o=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var r={bind:i,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():r.push(t))}function n(t){var n="readystatechange"===t.type&&"complete"!==o.readyState;if(!e.isReady&&!n){e.isReady=!0;for(var i=0,s=r.length;s>i;i++){var a=r[i];a()}}}function i(i){return i.bind(o,"DOMContentLoaded",n),i.bind(o,"readystatechange",n),i.bind(t,"load",n),e}var o=t.document,r=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],i)):t.docReady=i(t.eventie)}(this),function(){function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype,o=this,r=o.EventEmitter;i.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,o=this.getListenersAsObject(t),r="object"==typeof n;for(i in o)o.hasOwnProperty(i)&&-1===e(o[i],n)&&o[i].push(r?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(i=e(r[o],n),-1!==i&&r[o].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)r.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(o=e[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(t,e){var n,i,o,r,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(i=s[o].length;i--;)n=s[o][i],n.once===!0&&this.removeListener(t,n.listener),r=n.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof i[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=n.length;r>o;o++)if(e=n[o]+t,"string"==typeof i[e])return e}}var n="Webkit Moz ms Ms O".split(" "),i=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t),n=-1===t.indexOf("%")&&!isNaN(e);return n&&e}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=s.length;n>e;e++){var i=s[e];t[i]=0}return t}function i(t){function i(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=r(t);if("none"===i.display)return n();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var c=o.isBorderBox=!(!l||!i[l]||"border-box"!==i[l]),d=0,p=s.length;p>d;d++){var f=s[d],h=i[f];h=a(t,h);var m=parseFloat(h);o[f]=isNaN(m)?0:m}var g=o.paddingLeft+o.paddingRight,y=o.paddingTop+o.paddingBottom,v=o.marginLeft+o.marginRight,b=o.marginTop+o.marginBottom,S=o.borderLeftWidth+o.borderRightWidth,I=o.borderTopWidth+o.borderBottomWidth,C=c&&u,x=e(i.width);x!==!1&&(o.width=x+(C?0:g+S));var T=e(i.height);return T!==!1&&(o.height=T+(C?0:y+I)),o.innerWidth=o.width-(g+S),o.innerHeight=o.height-(y+I),o.outerWidth=o.width+v,o.outerHeight=o.height+b,o}}function a(t,e){if(o||-1===e.indexOf("%"))return e;var n=t.style,i=n.left,r=t.runtimeStyle,s=r&&r.left;return s&&(r.left=t.currentStyle.left),n.left=e,e=n.pixelLeft,n.left=i,s&&(r.left=s),e}var u,l=t("boxSizing");return function(){if(l){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[l]="border-box";var n=document.body||document.documentElement;n.appendChild(t);var i=r(t);u=200===e(i.width),n.removeChild(t)}}(),i}var o=t.getComputedStyle,r=o?function(t){return o(t,null)}:function(t){return t.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("get-style-property")):t.getSize=i(t.getStyleProperty)}(window),function(t,e){function n(t,e){return t[a](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function o(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),o=0,r=n.length;r>o;o++)if(n[o]===t)return!0;return!1}function r(t,e){return i(t),n(t,e)}var s,a=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,i=t.length;i>n;n++){var o=t[n],r=o+"MatchesSelector";if(e[r])return r}}();if(a){var u=document.createElement("div"),l=n(u,"div");s=l?n:r}else s=o;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):window.matchesSelector=s}(this,Element.prototype),function(t){function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){for(var e in t)return!1;return e=null,!0}function i(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var u=r("transition"),l=r("transform"),c=u&&l,d=!!r("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],f=["transform","transition","transitionDuration","transitionProperty"],h=function(){for(var t={},e=0,n=f.length;n>e;e++){var i=f[e],o=r(i);o&&o!==i&&(t[i]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var n in t){var i=h[n]||n;e[i]=t[n]}},a.prototype.getPosition=function(){var t=s(this.element),e=this.layout.options,n=e.isOriginLeft,i=e.isOriginTop,o=parseInt(t[n?"left":"right"],10),r=parseInt(t[i?"top":"bottom"],10);o=isNaN(o)?0:o,r=isNaN(r)?0:r;var a=this.layout.size;o-=n?a.paddingLeft:a.paddingRight,r-=i?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,n={};e.isOriginLeft?(n.left=this.position.x+t.paddingLeft+"px",n.right=""):(n.right=this.position.x+t.paddingRight+"px",n.left=""),e.isOriginTop?(n.top=this.position.y+t.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+t.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var m=d?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return void this.layoutPosition();var a=t-n,u=e-i,l={},c=this.layout.options;a=c.isOriginLeft?a:-a,u=c.isOriginTop?u:-u,l.transform=m(a,u),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=c?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);var i=this.element.offsetHeight;i=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var g=l&&i(l)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},a.prototype.transition=a.prototype[u?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=y[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],n(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd){var o=e.onEnd[i];o.call(this),delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(v)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=t.getComputedStyle,s=r?function(t){return r(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===d.call(t)}function i(t){var e=[];if(n(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,o=t.length;o>i;i++)e.push(t[i]);else e.push(t);return e}function o(t,e){var n=f(e,t);-1!==n&&e.splice(n,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()}function s(n,s,d,f,h,m){function g(t,n){if("string"==typeof t&&(t=a.querySelector(t)),!t||!p(t))return void(u&&u.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(n);var i=++y;this.element.outlayerGUID=i,v[i]=this,this._create(),this.options.isInitLayout&&this.layout()}var y=0,v={};return g.namespace="outlayer",g.Item=m,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(g.prototype,d.prototype),g.prototype.option=function(t){e(this.options,t)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)
},g.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],o=0,r=e.length;r>o;o++){var s=e[o],a=new n(s,this);i.push(a)}return i},g.prototype._filterFindItemElements=function(t){t=i(t);for(var e=this.options.itemSelector,n=[],o=0,r=t.length;r>o;o++){var s=t[o];if(p(s))if(e){h(s,e)&&n.push(s);for(var a=s.querySelectorAll(e),u=0,l=a.length;l>u;u++)n.push(a[u])}else n.push(s)}return n},g.prototype.getItemElements=function(){for(var t=[],e=0,n=this.items.length;n>e;e++)t.push(this.items[e].element);return t},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=f(this.element)},g.prototype._getMeasurement=function(t,e){var n,i=this.options[t];i?("string"==typeof i?n=this.element.querySelector(i):p(i)&&(n=i),this[t]=n?f(n)[e]:i):this[t]=0},g.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},g.prototype._getItemsForLayout=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var o=t[n];o.isIgnored||e.push(o)}return e},g.prototype._layoutItems=function(t,e){function n(){i.emitEvent("layoutComplete",[i,t])}var i=this;if(!t||!t.length)return void n();this._itemsOn(t,"layout",n);for(var o=[],r=0,s=t.length;s>r;r++){var a=t[r],u=this._getItemLayoutPosition(a);u.item=a,u.isInstant=e||a.isLayoutInstant,o.push(u)}this._processLayoutQueue(o)},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];this._positionItem(i.item,i.x,i.y,i.isInstant)}},g.prototype._positionItem=function(t,e,n,i){i?t.goTo(e,n):t.moveTo(e,n)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},g.prototype._getContainerSize=c,g.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},g.prototype._itemsOn=function(t,e,n){function i(){return o++,o===r&&n.call(s),!0}for(var o=0,r=t.length,s=this,a=0,u=t.length;u>a;a++){var l=t[a];l.on(e,i)}},g.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},g.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},g.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,n=t.length;n>e;e++){var i=t[e];this.ignore(i)}}},g.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,n=t.length;n>e;e++){var i=t[e];o(i,this.stamps),this.unignore(i)}},g.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=i(t)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var n=this.stamps[t];this._manageStamp(n)}}},g.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},g.prototype._manageStamp=c,g.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,i=f(t),o={left:e.left-n.left-i.marginLeft,top:e.top-n.top-i.marginTop,right:n.right-e.right-i.marginRight,bottom:n.bottom-e.bottom-i.marginBottom};return o},g.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},g.prototype.bindResize=function(){this.isResizeBound||(n.bind(t,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&n.unbind(t,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var t=f(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},g.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},g.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},g.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var n=0;e>n;n++){var i=t[n];i.reveal()}},g.prototype.hide=function(t){var e=t&&t.length;if(e)for(var n=0;e>n;n++){var i=t[n];i.hide()}},g.prototype.getItem=function(t){for(var e=0,n=this.items.length;n>e;e++){var i=this.items[e];if(i.element===t)return i}},g.prototype.getItems=function(t){if(t&&t.length){for(var e=[],n=0,i=t.length;i>n;n++){var o=t[n],r=this.getItem(o);r&&e.push(r)}return e}},g.prototype.remove=function(t){t=i(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var n=0,r=e.length;r>n;n++){var s=e[n];s.remove(),o(s,this.items)}}},g.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,n=this.items.length;n>e;e++){var i=this.items[e];i.destroy()}this.unbindResize(),delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},g.data=function(t){var e=t&&t.outlayerGUID;return e&&v[e]},g.create=function(t,n){function i(){g.apply(this,arguments)}return Object.create?i.prototype=Object.create(g.prototype):e(i.prototype,g.prototype),i.prototype.constructor=i,i.defaults=e({},g.defaults),e(i.defaults,n),i.prototype.settings={},i.namespace=t,i.data=g.data,i.Item=function(){m.apply(this,arguments)},i.Item.prototype=new m,s(function(){for(var e=r(t),n=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",s=0,c=n.length;c>s;s++){var d,p=n[s],f=p.getAttribute(o);try{d=f&&JSON.parse(f)}catch(h){u&&u.error("Error parsing "+o+" on "+p.nodeName.toLowerCase()+(p.id?"#"+p.id:"")+": "+h);continue}var m=new i(p,d);l&&l.data(p,t,m)}}),l&&l.bridget&&l.bridget(t,i),i},g.Item=m,g}var a=t.document,u=t.console,l=t.jQuery,c=function(){},d=Object.prototype.toString,p="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},f=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):t.Outlayer=s(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t,e){var i=t.create("masonry");return i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],n=t&&t.element;this.columnWidth=n&&e(n).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},i.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,n=e(t);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",o=Math[i](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var r=this._getColGroup(o),s=Math.min.apply(Math,r),a=n(r,s),u={x:this.columnWidth*a,y:s},l=s+t.size.outerHeight,c=this.cols+1-r.length,d=0;c>d;d++)this.colYs[a+d]=l;return u},i.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],n=this.cols+1-t,i=0;n>i;i++){var o=this.colYs.slice(i,i+t);e[i]=Math.max.apply(Math,o)}return e},i.prototype._manageStamp=function(t){var n=e(t),i=this._getElementOffset(t),o=this.options.isOriginLeft?i.left:i.right,r=o+n.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var u=(this.options.isOriginTop?i.top:i.bottom)+n.outerHeight,l=s;a>=l;l++)this.colYs[l]=Math.max(u,this.colYs[l])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},i.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},i}var n=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++){var o=t[n];if(o===e)return n}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window);(function(t,e){"use strict";if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return e(t,n,i)})}else if(typeof exports==="object"){module.exports=e(t,require("eventEmitter"),require("eventie"))}else{t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}})(this,function(t,e,n){"use strict";function i(t,e){for(var n in e){t[n]=e[n]}return t}function o(t){return p.call(t)==="[object Array]"}function r(t){var e=[];if(o(t)){e=t}else if(typeof t.length==="number"){for(var n=0,i=t.length;n<i;n++){e.push(t[n])}}else{e.push(t)}return e}function s(t,e,n){if(!(this instanceof s)){return new s(t,e)}if(typeof t==="string"){t=document.querySelectorAll(t)}this.elements=r(t);this.options=i({},this.options);if(typeof e==="function"){n=e}else{i(this.options,e)}if(n){this.on("always",n)}this.getImages();if(l){this.jqDeferred=new l.Deferred}var o=this;setTimeout(function(){o.check()})}function a(t){this.img=t}function u(t){this.src=t;f[t]=this}var l=t.jQuery;var c=t.console;var d=typeof c!=="undefined";var p=Object.prototype.toString;s.prototype=new e;s.prototype.options={};s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;t<e;t++){var n=this.elements[t];if(n.nodeName==="IMG"){this.addImage(n)}var i=n.querySelectorAll("img");for(var o=0,r=i.length;o<r;o++){var s=i[o];this.addImage(s)}}};s.prototype.addImage=function(t){var e=new a(t);this.images.push(e)};s.prototype.check=function(){function t(t,o){if(e.options.debug&&d){c.log("confirm",t,o)}e.progress(t);n++;if(n===i){e.complete()}return true}var e=this;var n=0;var i=this.images.length;this.hasAnyBroken=false;if(!i){this.complete();return}for(var o=0;o<i;o++){var r=this.images[o];r.on("confirm",t);r.check()}};s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t);if(e.jqDeferred&&e.jqDeferred.notify){e.jqDeferred.notify(e,t)}})};s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=true;var e=this;setTimeout(function(){e.emit(t,e);e.emit("always",e);if(e.jqDeferred){var n=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[n](e)}})};if(l){l.fn.imagesLoaded=function(t,e){var n=new s(this,t,e);return n.jqDeferred.promise(l(this))}}a.prototype=new e;a.prototype.check=function(){var t=f[this.img.src]||new u(this.img.src);if(t.isConfirmed){this.confirm(t.isLoaded,"cached was confirmed");return}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}var e=this;t.on("confirm",function(t,n){e.confirm(t.isLoaded,n);return true});t.check()};a.prototype.confirm=function(t,e){this.isLoaded=t;this.emit("confirm",this,e)};var f={};u.prototype=new e;u.prototype.check=function(){if(this.isChecked){return}var t=new Image;n.bind(t,"load",this);n.bind(t,"error",this);t.src=this.src;this.isChecked=true};u.prototype.handleEvent=function(t){var e="on"+t.type;if(this[e]){this[e](t)}};u.prototype.onload=function(t){this.confirm(true,"onload");this.unbindProxyEvents(t)};u.prototype.onerror=function(t){this.confirm(false,"onerror");this.unbindProxyEvents(t)};u.prototype.confirm=function(t,e){this.isConfirmed=true;this.isLoaded=t;this.emit("confirm",this,e)};u.prototype.unbindProxyEvents=function(t){n.unbind(t.target,"load",this);n.unbind(t.target,"error",this)};return s});$(function(){"use strict";var t,e,n;var i=$(".index .wrap");i.imagesLoaded(function(){i.removeClass("hidden");i.masonry({itemSelector:"a",columnWidth:".grid-sizer",gutter:".gutter-sizer",transitionDuration:0});$(window).resize(function(){i.masonry()})});$(".container").on("click",".index.previous,.index.next",r);$(".name,.work-link,.index-link").on("click",r);$(".project").on("click",".back-to-index",r);$(".index").find("a").on("click",r);$(".project").on("click",".next-project",r);$(".about-link").on("click",r);$(".project").on("click",".download",a);function o(){switch(t.data.template){case"index":$(".project.active,.about.active").removeClass("slide").stop(true,true).delay(300).queue(function(t){$(this).removeClass("active");$(this).find("article").html("");$(".index").addClass("active").css("top","");n=$(".index").attr("data-scroll");if(typeof n!=="undefined"&&n!==false){$(".index").removeAttr("data-scroll");$("html,body").scrollTop(n)}t()});$(".index").removeClass("previous next");$("header").addClass("index-active").removeClass("project-active about-active");break;case"project":$(".project").find("article").html(t.data.response.html);s(true,function(){$(".project").stop(true,true).addClass("active").delay(1).queue(function(t){$(this).addClass("slide");t()});n=$(document).scrollTop();$("html,body").scrollTop(0);$(".about").removeClass("active slide");$(".index").removeClass("active").addClass("previous").attr("data-scroll",n).css("top","-"+n+"px");$("header").removeClass("about-active index-active").addClass("project-active");$(".project-link").text(t.data.response.title)});break;case"next-project":$(".project").find("article").html(t.data.response.html);$(".project-link").text(t.data.response.title);$("html,body").animate({scrollTop:0},400);s(true);break;case"about":$(".about").find("article").html(t.data.response.html);$(".about").addClass("active").stop(true,true).delay(20).queue(function(t){$(this).addClass("slide");t()});n=$(document).scrollTop();$("html,body").scrollTop(0);$(".project").removeClass("active slide").find("article").html("");$(".index").removeClass("active").addClass("next").attr("data-scroll",n).css("top","-"+n+"px");$("header").removeClass("project-active index-active").addClass("about-active");$("html,body").animate({scrollTop:0},400);break}}function r(t){t.preventDefault();$("header").removeClass("error");var e=$(this).attr("href"),n=e==="/"?"/index":e,i=$(this).hasClass("next-project")?"?next=true":"";if(typeof e==="undefined"||e===false){e="/";n="/index"}if(n==="/index"&&$(".index").hasClass("active")){$("html,body").animate({scrollTop:0},400);return}else{$("header").addClass("loading")}$.ajax({url:n.replace(/\/+$/,"")+".json"+i,dataType:"json",success:function(t){$("header").removeClass("loading");History.pushState({template:t.response.template,response:t.response},t.response.page.title,e);analytics.page(u(t.response.template),u(t.response.title?t.response.title:"Home"))},error:function(){$("header").addClass("error").stop(true,true).delay(200).queue(function(t){$(this).removeClass("error");window.location.href=e;t()})}})}History.Adapter.bind(window,"statechange",function(){t=History.getState();if(e)e.pause();o()});s();if((!Modernizr.audio||!Modernizr.video)&&!$.cookie("support-message-seen")){$("body").addClass("no-support");$(".supports-error-close").on("click",function(t){t.preventDefault();$("body").removeClass("no-support");$.cookie("support-message-seen",true)});analytics.track("Browser support error message seen")}function s(t,n){var i=typeof t==="undefined"?false:t,o=typeof n==="undefined"?null:n;var r=$(".video,.audio");if(r.size()<1){if(o)o();return}r.each(function(){var n=$(this),r=n.find(".controls .progress"),s=n.find(".controls .playlist"),a=r.find(".track")[0],u=n.find(".controls .current-time")[0],c=n.find(".controls .total-time")[0],d=n.find(".controls .playhead")[0],p;e=n.find("video,audio").first()[0];r.on("mousedown",v);r.on("mouseup",S);r.on("click",y);s.find("a").on("click",T);$(".controls,.controls .play-pause").on("click",C);$(".controls .fullscreen").on("click",I);$(".preview").on("click",C);n.on("mouseenter mouseleave",x);$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){if(document.mozfullScreen||document.webkitIsFullScreen||document.fullScreenElement&&document.fullScreenElement!==null){n.addClass("state-fullscreen")}else{n.removeClass("state-fullscreen")}});$(e).on("play pause",f);$(e).on("timeupdate",h);$(e).on("loadedmetadata",g);if(o)$(e).one("loadeddata",o);$(e).on("ended",m);e.src=L(e);e.load();if(i){n.removeClass("state-preview");setTimeout(function(){e.play()},450)}else{if(e.getAttribute("data-poster")){e.setAttribute("poster",e.getAttribute("data-poster"));e.removeAttribute("data-poster")}}function f(t){if(t.type==="play"){if(s.size()>0)s.find("a:eq("+e.dataset.index+")").addClass("active");n.removeClass("state-paused").addClass("state-playing");w()}else{n.removeClass("state-playing").addClass("state-paused")}}function h(){d.style.width=100/e.duration*e.currentTime+"%";u.innerHTML=l(e.currentTime)}function m(){if(n.hasClass("video")){e.pause();setTimeout(function(){n.addClass("state-preview")},50);E()}else if(n.hasClass("album")){var t=s.find(".active");t.removeClass("active");if(t.is(":last-child")){E(false);e.dataset.index=0}else{t.next().addClass("active").click()}}else{E()}}function g(){c.innerHTML=l(e.duration)}function y(t){t.preventDefault();t.stopImmediatePropagation();e.currentTime=e.duration*Math.min((t.clientX-a.getBoundingClientRect().left)/a.offsetWidth,1)}function v(t){t.preventDefault();t.stopImmediatePropagation();r.on("mousemove",b)}function b(t){t.preventDefault();e.currentTime=e.duration*Math.min((t.clientX-a.getBoundingClientRect().left)/a.offsetWidth,1)}function S(t){t.preventDefault();t.stopImmediatePropagation();r.off("mousemove",b)}function I(t){t.preventDefault();t.stopImmediatePropagation();if(!n.hasClass("state-fullscreen")){if(e.requestFullscreen){n[0].requestFullscreen()}else if(e.mozRequestFullScreen){n[0].mozRequestFullScreen()}else if(e.webkitRequestFullscreen){n[0].webkitRequestFullscreen()}}else{if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}function C(t){t.preventDefault();t.stopImmediatePropagation();if(!n.hasClass("state-preview")){if(e.paused){e.play()}else{e.pause()}}else{n.removeClass("state-preview");$(".preview").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){n.addClass("state-controls");n.bind("mousemove",function(){if(!$(this).hasClass("state-paused")){n.addClass("state-controls");w()}});e.play()})}}function x(t){if(n.hasClass("state-preview"))return;if(t.type==="mouseenter"){n.addClass("state-controls");n.bind("mousemove",function(){if(!$(this).hasClass("state-paused")){n.addClass("state-controls");w()}})}else if(t.type==="mouseleave"){n.unbind("mousemove");if(!$(this).hasClass("state-paused")){n.stop(true,true).delay(50).queue(function(t){$(this).removeClass("state-controls");t()})}}}function T(t){t.preventDefault();t.stopImmediatePropagation();E();e.dataset.src=$(this)[0].dataset.src;e.src=L(e);s.find(".active").removeClass("active");e.dataset.index=$(this).addClass("active").index();c.innerHTML=l(e.dataset.src[0].length);e.load();e.play()}function E(n){n=typeof n!=="undefined"?t:true;if(!e.paused)e.pause();$(d).fadeOut(250,function(){if(n)$(d).fadeIn(250)})}function L(t){var e="",n=JSON.parse(t.dataset.src);n.forEach(function(t){if(Modernizr.audio[t.type]||Modernizr.video[t.type]){e=t.url;return false}});if(!e)throw"Error: No playable audio file found";return e}function w(){clearTimeout(p);p=setTimeout(function(){if(n.hasClass("state-playing")){n.removeClass("state-controls")}},2e3)}})}function a(){analytics.track("Download",{project:$(".project h2").text()})}function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t){var e=Math.floor(t/60%60).toString(),n=Math.floor(t%60).toString();return e+":"+(n<10?"0"+n:n)}});$.extend($.easing,{def:"easeOutExpo",swing:function(t,e,n,i,o){return $.easing[$.easing.def](t,e,n,i,o)},easeOutExpo:function(t,e,n,i,o){return e==o?n+i:i*(-Math.pow(2,-10*e/o)+1)+n}});